(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-989c86e2"],{2899:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-menu",{attrs:{params:"route: route"},on:{"handle-theme":t.updateParentTheme}}),a("div",{class:t.currentTheme},[a("Board")],1)],1)},n=[],i=a("664c"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main container-fluid"},[a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-12 board-title"},[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","user"]}}),a("div",{staticClass:"text"},[t._v("Bảng cá nhân")])],1),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"card boardCreate",on:{click:t.createNewBoard}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"text-inside"},[a("a",{staticClass:"btn btn-primary circle"},[a("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" Tạo bảng ")])])])]),t._l(t.boardList.myBoard,(function(e,r){return a("div",{key:r,staticClass:"col-md-3 mb-3"},[a("router-link",{attrs:{to:"/boardDetail/"+e.id}},[a("div",{staticClass:"card boardCard",style:{backgroundImage:"url("+(e&&e.backgroundColor?e.backgroundColor:"")+")"}},[a("div",{staticClass:"card-body d-flex flex-column justify-content-between"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"text-inside"},[t._v(t._s(e.title))]),"private"==e.visibility?a("font-awesome-icon",{attrs:{icon:["fas","lock"]}}):a("font-awesome-icon",{attrs:{icon:["fas","globe-europe"]}})],1),a("div",{staticClass:"d-flex justify-content-end"},t._l(e.userList,(function(t,e){return a("div",{key:e,staticClass:"avatar-circle board"},[a("div",{staticClass:"inside img-thumbnail",style:{backgroundImage:"url("+(t&&t.avatar?t.avatar:"")+")"}})])})),0)])])])],1)}))],2),a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-12 board-title"},[a("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","users"]}}),a("div",{staticClass:"text"},[t._v("Bảng toàn công ty")])],1),t._l(t.boardList.data,(function(e,r){return a("div",{key:r,staticClass:"col-md-3 mb-3"},[a("div",{staticClass:"card boardCard",style:{backgroundImage:"url("+(e&&e.backgroundColor?e.backgroundColor:"")+")"},on:{click:function(e){return t.showMessage("noPermission")}}},[a("div",{staticClass:"card-body d-flex flex-column justify-content-between"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"text-inside"},[t._v(t._s(e.title))]),"private"==e.visibility?a("font-awesome-icon",{attrs:{icon:["fas","lock"]}}):a("font-awesome-icon",{attrs:{icon:["fas","globe-europe"]}})],1),a("div",{staticClass:"d-flex justify-content-end"},t._l(e.userList,(function(t,e){return a("div",{key:e,staticClass:"avatar-circle board"},[a("div",{staticClass:"inside img-thumbnail",style:{backgroundImage:"url("+(t&&t.avatar?t.avatar:"")+")"}})])})),0)])])])}))],2)]),a("el-dialog",{staticClass:"transition-box-center",attrs:{title:"Tạo bảng mới",visible:t.modalCreateBoard,width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.modalCreateBoard=e}}},[a("div",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label font-weight-bold"},[t._v("Tên bảng")]),a("div",{staticClass:"mb-20"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formCreate.title,expression:"formCreate.title"}],staticClass:"input-primary medium",attrs:{type:"text",placeholder:"Nhập tên chu kỳ"},domProps:{value:t.formCreate.title},on:{input:function(e){e.target.composing||t.$set(t.formCreate,"title",e.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label font-weight-bold"},[t._v("Chế độ")]),a("div",{staticClass:"mb-20"},[a("el-select",{staticClass:"w-100",attrs:{clearable:"",placeholder:"Chọn chế độ"},model:{value:t.formCreate.visibility,callback:function(e){t.$set(t.formCreate,"visibility",e)},expression:"formCreate.visibility"}},t._l(t.commonData.visibilityBoard,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1)])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"btn btn-primary btn-medium",on:{click:t.submit}},[t._v(" Tạo bảng ")])])])],1)},o=[],c=(a("ac1f"),a("5319"),a("96cf"),a("1da1")),l=a("5530"),u=a("2f62"),d=a("29db"),m=(a("a4d3"),a("e01a"),a("2b0e")),p=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a,r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={PageIndex:e,PageSize:a,Description:r},t.abrupt("return",m["default"].prototype.$http.post("/api/board/getAll",n));case 2:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}(),v=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m["default"].prototype.$http.post("/api/board/create",e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m["default"].prototype.$http.post("/api/board/update",e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m["default"].prototype.$http.get("/api/company/getRelatedUser"));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g={getData:p,createBoard:v,updateBoard:f,getUserList:h},b=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.getData(e.state.searchRequest.pageIndex,e.state.searchRequest.pageSize,e.state.searchRequest.description);case 2:a=t.sent,e.commit("SET_DATA",a.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.id||""==a.id){t.next=6;break}return t.next=3,g.updateBoard(a);case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,g.createBoard(a);case 8:t.t0=t.sent;case 9:return r=t.t0,t.abrupt("return",r.data);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),k=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.getUserList(a);case 2:r=t.sent,e.commit("SET_USER_LIST",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),w={getData:b,editBoard:C,getUserList:k},y=(a("7db0"),a("caad"),a("d81d"),a("2532"),a("2ef0")),_=a.n(y),x=function(t){var e={};if(t.data){var a=[];e=_.a.map(t.data,(function(e){if(e.userList=[],e.participantOject=e.participant?JSON.parse(e.participant.replace(/'/g,'"')):"",e.participantOject&&e.participantOject.length&&t.userList)for(var r=function(a){var r=_.a.find(t.userList,(function(t){return t.id===e.participantOject[a]}));e.userList.push(r)},n=0;n<e.participantOject.length;n++)r(n);return e.isMember=!(!e.participant||!e.participant.includes(localStorage.getItem("userId"))),e.isMember&&a.push(e),e})),e.data=e,e.myBoard=a,e.total=t.total}return e},$=function(t){var e={};return t.userList&&(e=_.a.map(t.userList,(function(t){return t}))),e},S={getData:x,getUserList:$},I=function(t,e){t.data=e.data,t.total=e.total},T=function(t,e){t.userList=e},L={SET_DATA:I,SET_USER_LIST:T},j={data:null,total:0,userList:null,searchRequest:{description:"",pageIndex:1,pageSize:10}},R={namespaced:!0,state:j,actions:w,getters:S,mutations:L},O={components:{},data:function(){return{commonData:d["a"],modalCreateBoard:!1,formCreate:{title:"",adminId:"",companyId:"",visible:"public",participant:[],status:"new",isDelete:!1}}},computed:Object(l["a"])(Object(l["a"])({},Object(u["c"])({searchRequest:function(t){return t.$_board.searchRequest}})),Object(u["b"])({boardList:"$_board/getData"})),created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,r="$_board",r in t.$store._modules.root._children||a.$store.registerModule(r,R),e.next=5,a.$store.dispatch("$_board/getUserList");case 5:return e.next=7,a.$store.dispatch("$_board/getData");case 7:case"end":return e.stop()}}),e)})))()},methods:{showMessage:function(t){var e=this,a="",r="success";switch(t){case"noPermission":r="error",a="Bạn không có quyền truy cập";break;default:break}e.$message({message:a,type:r})},redirectTo:function(t){t?this.$router.push(t):this.$router.go(-1)},createNewBoard:function(){var t=this;t.modalCreateBoard=!0},submit:_.a.debounce(Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.prev=1,e.formCreate.adminId=localStorage.getItem("userId"),e.formCreate.participant.push(localStorage.getItem("userId")),e.formCreate.participant=JSON.stringify(e.formCreate.participant),e.formCreate.participant=e.formCreate.participant.replace(/"/g,"'"),t.next=8,e.$store.dispatch("$_board/editBoard",e.formCreate);case 8:return e.$notify({title:"Chúc mừng",message:"Tạo thành công",type:"success"}),t.next=11,e.$store.dispatch("$_board/getData");case 11:e.modalCreateBoard=!1,t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),e.$notify.error({title:"Thất bại",message:"Tạo thất bại"});case 17:case"end":return t.stop()}}),t,this,[[1,14]])}))),500)}},B=O,E=a("2877"),D=Object(E["a"])(B,s,o,!1,null,null,null),P=D.exports,U={name:"createCompany",data:function(){return{currentTheme:localStorage.getItem("theme-color")?localStorage.getItem("theme-color"):"theme-light"}},components:{Board:P,"nav-menu":i["a"]},methods:{updateParentTheme:function(t){var e=this;e.currentTheme=t}}},A=U,N=Object(E["a"])(A,r,n,!1,null,null,null);e["default"]=N.exports},5319:function(t,e,a){"use strict";var r=a("d784"),n=a("825a"),i=a("7b0b"),s=a("50c4"),o=a("a691"),c=a("1d80"),l=a("8aa5"),u=a("14c3"),d=Math.max,m=Math.min,p=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,a,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=r.REPLACE_KEEPS_$0,C=g?"$":"$0";return[function(a,r){var n=c(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,r):e.call(String(n),a,r)},function(t,r){if(!g&&b||"string"===typeof r&&-1===r.indexOf(C)){var i=a(e,t,this,r);if(i.done)return i.value}var c=n(t),p=String(this),v="function"===typeof r;v||(r=String(r));var f=c.global;if(f){var w=c.unicode;c.lastIndex=0}var y=[];while(1){var _=u(c,p);if(null===_)break;if(y.push(_),!f)break;var x=String(_[0]);""===x&&(c.lastIndex=l(p,s(c.lastIndex),w))}for(var $="",S=0,I=0;I<y.length;I++){_=y[I];for(var T=String(_[0]),L=d(m(o(_.index),p.length),0),j=[],R=1;R<_.length;R++)j.push(h(_[R]));var O=_.groups;if(v){var B=[T].concat(j,L,p);void 0!==O&&B.push(O);var E=String(r.apply(void 0,B))}else E=k(T,p,L,j,O,r);L>=S&&($+=p.slice(S,L)+E,S=L+T.length)}return $+p.slice(S)}];function k(t,a,r,n,s,o){var c=r+t.length,l=n.length,u=f;return void 0!==s&&(s=i(s),u=v),e.call(o,u,(function(e,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,r);case"'":return a.slice(c);case"<":o=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>l){var d=p(u/10);return 0===d?e:d<=l?void 0===n[d-1]?i.charAt(1):n[d-1]+i.charAt(1):e}o=n[u-1]}return void 0===o?"":o}))}}))},"664c":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light",class:t.currentTheme},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[a("img",{staticClass:"img-fluid",attrs:{src:t.MainLogo}})]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbar"}},[a("ul",{staticClass:"navbar-nav mr-auto"},t._l(t.routes,(function(e,r){return a("li",{key:r,staticClass:"nav-item"},[a("router-link",{attrs:{to:e.path,"exact-active-class":"active"}},["checkIn"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.checkin")))])]):t._e(),"checkInCompany"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.companyCheckin")))])]):t._e(),"conversation"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.conversation")))])]):t._e(),"board"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.board")))])]):t._e()])],1)})),0),a("ul",{staticClass:"navbar-nav ml-auto"},[a("avatar",{on:{toggle:t.updateParentOpened,"hide-dropdown":t.updateParentHideDropdown}}),a("div",{staticClass:"position-relative"},[a("div",{staticClass:"dropdown-menu",class:{show:t.opened}},[a("div",{staticClass:"dropdown-item d-flex align-items-center justify-content-between"},[a("div",{staticClass:"col-md-4 px-0"},[t._v(t._s(t.$t("common.selectLang"))+":")]),a("el-select",{staticClass:"col-md-8",attrs:{placeholder:"Language"},on:{change:t.handleChangeLang},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}},["en"==t.$i18n.locale?a("div",t._l(t.commonData.optionLangEN,(function(e,r){return a("el-option",{key:r,attrs:{label:e.text,value:e.value}},[a("div",{staticClass:"d-flex align-items-center"},[a("img",{staticClass:"logo-lang",attrs:{src:e.flag}}),a("div",{staticClass:"ml-2"},[t._v(t._s(e.text))])])])})),1):a("div",t._l(t.commonData.optionLangVN,(function(e,r){return a("el-option",{key:r,attrs:{label:e.text,value:e.value}},[a("div",{staticClass:"d-flex align-items-center"},[a("img",{staticClass:"logo-lang",attrs:{src:e.flag}}),a("div",{staticClass:"ml-2"},[t._v(t._s(e.text))])])])})),1)])],1),a("div",{staticClass:"dropdown-item d-flex align-items-center justify-content-between"},[a("div",{staticClass:"col-md-4 px-0"},[t._v(t._s(t.$t("common.theme"))+":")]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"custom-control custom-switch"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"switch"},domProps:{checked:"theme-dark"==t.currentTheme},on:{change:function(e){return t.handleTheme()}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"switch"}})])])]),a("div",{staticClass:"dropdown-item"},[a("a",{staticClass:"d-block",attrs:{href:"javascript:;"},on:{click:function(e){return t.redirectTo("/userInfo")}}},[t._v(t._s(t.$t("common.accountInfo")))])]),a("div",{staticClass:"dropdown-item"},[a("a",{staticClass:"d-block",attrs:{href:"javascript:;"},on:{click:t.linkToAdmin}},[t._v(t._s(t.$t("common.infoManagement")))])]),a("div",{staticClass:"dropdown-item"},[a("a",{staticClass:"d-block",attrs:{href:"javascript:;"},on:{click:t.logout}},[t._v(t._s(t.$t("common.logout")))])])])])],1)])],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbar"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],i=(a("caad"),a("2532"),a("96cf"),a("1da1")),s=a("5530"),o=a("d046"),c=a("2f62"),l=a("29db"),u=a("7150"),d=a("267f"),m=a.n(d),p=a("e67d"),v=a.n(p),f={components:{avatar:u["a"]},directives:{ClickOutside:v.a},data:function(){return{routes:o["a"],commonData:l["a"],MainLogo:m.a,connection:null,pathname:"",opened:!1,lang:localStorage.getItem("lang")?localStorage.getItem("lang"):"vn",currentTheme:localStorage.getItem("theme-color")?localStorage.getItem("theme-color"):"theme-light"}},created:function(){var t=this;t.pathname=window.location.pathname,t.listeningSocket()},mounted:function(){var t=this,e=document.body;"theme-dark"==t.currentTheme?e.classList.add("theme-dark"):e.classList.remove("theme-dark")},computed:Object(s["a"])({},Object(c["b"])({currentUser:"$_loginPage/getCurrentUser"})),methods:{updateParentOpened:function(t){var e=this;e.opened=t},updateParentHideDropdown:function(t){var e=this;e.opened=t},handleChangeLang:function(t){var e=this;e.lang=t,localStorage.setItem("lang",e.lang),this.$store.dispatch("setLang",e.lang)},handleTheme:function(){var t=this,e=localStorage.getItem("theme-color"),a=document.body;"theme-dark"===e?(localStorage.setItem("theme-color","theme-light"),t.currentTheme=localStorage.getItem("theme-color"),a.classList.remove("theme-dark")):(localStorage.setItem("theme-color","theme-dark"),t.currentTheme=localStorage.getItem("theme-color"),a.classList.add("theme-dark")),t.$emit("handle-theme",t.currentTheme)},listeningSocket:function(){var t=this,e=a("1a9a");t.connection=(new e.HubConnectionBuilder).withUrl("".concat("https://dev-kpi-api.twgroup.vn","/chatHub")).build(),t.connection.start().then((function(){t.connection.on("ReceiveMessage",function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a,r,n,i,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=s,e.next="sendTextMessage"===e.t0?3:"moveCard"===e.t0?9:13;break;case 3:if(!t.pathname.includes("conversation")||t.currentUser.id!==a){e.next=8;break}return e.next=6,t.$store.dispatch(n,i);case 6:return e.next=8,t.$store.dispatch("$_conversation/getListConversation");case 8:return e.abrupt("break",14);case 9:if(!t.pathname.includes("boardDetail/".concat(i))||t.currentUser.id===a){e.next=12;break}return e.next=12,t.$store.dispatch(n,i);case 12:return e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t,a,r,n,i){return e.apply(this,arguments)}}())}))},redirectTo:function(t){t?this.$router.push(t):this.$router.go(-1)},linkToAdmin:function(){var t=this,e=document.body;e.classList.remove("theme-dark"),t.$router.push("/admin/company")},logout:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,a.$store.dispatch("$_loginPage/logout");case 3:a.user=null,document.body.classList.remove("theme-dark");case 5:case"end":return e.stop()}}),e)})))()}}},h=f,g=a("2877"),b=Object(g["a"])(h,r,n,!1,null,"52d455b2",null);e["a"]=b.exports},"7db0":function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").find,i=a("44d2"),s=a("ae40"),o="find",c=!0,l=s(o);o in[]&&Array(1)[o]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!l},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),i=a("da84"),s=a("5135"),o=a("861d"),c=a("9bf2").f,l=a("e893"),u=i.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(m,u);var p=m.prototype=u.prototype;p.constructor=m;var v=p.toString,f="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=v.call(t);if(s(d,t))return"";var a=f?e.slice(7,-1):e.replace(h,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:m})}}}]);
//# sourceMappingURL=chunk-989c86e2.78f6075c.js.map