(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40cf60a2"],{4344:function(t,e){},"63fc":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav-menu",{attrs:{params:"route: route"}}),a("div",{staticClass:"container-fluid my-3"},[a("UserInfo")],1)],1)},n=[],s=a("664c"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row white-background"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group mb-0"},[a("div",{staticClass:"avatar-circle square"},[a("div",{staticClass:"logo"},[t.formData.avatar?a("div",{style:{backgroundImage:"url("+(t.formData&&t.formData.avatar?t.formData.avatar:"")+")"}}):a("div",{style:{backgroundImage:"url("+t.NoAvatar+")"}})]),a("div",{staticClass:"group-edit-avatar"},[a("font-awesome-icon",{attrs:{icon:["fas","pen-square"]}}),a("input",{staticClass:"avatar-input",attrs:{type:"file",name:"file",id:"file"},on:{change:t.handleFileUpload}})],1)])])]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"group-company-detail"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("label",{attrs:{for:"inputUserName"}},[t._v("User Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"input-primary medium",attrs:{type:"text",id:"inputUserName",readonly:""},domProps:{value:t.formData.username},on:{input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputName"}},[t._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.fullName,expression:"formData.fullName"}],staticClass:"input-primary medium",attrs:{type:"text",id:"inputName"},domProps:{value:t.formData.fullName},on:{input:function(e){e.target.composing||t.$set(t.formData,"fullName",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputShortName"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input-primary medium",attrs:{type:"text",id:"inputShortName"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputCompanyName"}},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"input-primary medium",attrs:{type:"email",id:"inputCompanyName"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputPassword"}},[t._v("Phone number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phoneNumber,expression:"formData.phoneNumber"}],staticClass:"input-primary medium",attrs:{type:"text",id:"inputPassword"},domProps:{value:t.formData.phoneNumber},on:{input:function(e){e.target.composing||t.$set(t.formData,"phoneNumber",e.target.value)}}})])]),a("div",[a("button",{staticClass:"btn btn-primary btn-medium",on:{click:t.submit}},[t._v("Submit")])])])])])])},i=[],c=(a("96cf"),a("1da1")),l=a("5530"),u=a("2f62"),m=a("2b0e"),d=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m["default"].prototype.$http.post("/api/user/update",e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e),t.abrupt("return",m["default"].prototype.$http.post("/api/company/uploadAvatar",a,{headers:{"Content-Type":"multipart/form-data"}}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v={editUser:d,uploadImage:p},f=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.editUser(a);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),g=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.uploadImage(a);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),h={editUser:f,uploadImage:g},b=a("bbb5"),C=a.n(b),w=a("4344"),k=a.n(w),x={data:null,total:0,headers:{nameDepartment:!0,description:!0,setting:!0},searchRequest:{description:"",pageIndex:1,pageSize:10}},_={namespaced:!0,state:x,actions:h,getters:C.a,mutations:k.a},$=a("6966"),y=a.n($),D=a("2ef0"),N=a.n(D),I={components:{},data:function(){return{NoAvatar:y.a,formData:{avatar:null,username:"",fullName:"",password:"",email:"",phoneNumber:""},file:null,path:null}},computed:Object(l["a"])(Object(l["a"])({},Object(u["c"])({})),Object(u["b"])({currentUser:"$_loginPage/getCurrentUser"})),created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,r="$_userInfo",r in t.$store._modules.root._children||a.$store.registerModule(r,_),!localStorage.getItem("userId")){e.next=6;break}return e.next=6,a.$store.dispatch("$_loginPage/getCurrentUser",localStorage.getItem("userId"));case 6:try{a.formData=N.a.cloneDeep(a.currentUser)}catch(n){console.log(n)}case 7:case"end":return e.stop()}}),e)})))()},methods:{handleFileUpload:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e,r.file=t.target.files[0],!r.file){a.next=9;break}return a.next=5,e.$store.dispatch("$_userInfo/uploadImage",r.file);case 5:n=a.sent,n&&n.path&&(r.path=n.path,r.formData.avatar=r.path),a.next=10;break;case 9:e.$notify.error({title:"Thất bại",message:"Ảnh k đúng định dạng"});case 10:case"end":return a.stop()}}),a)})))()},submit:N.a.debounce(Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,t.prev=1,e.dialogVisible=!0,!e.currentUser.id){t.next=6;break}return t.next=6,e.$store.dispatch("$_userInfo/editUser",e.formData);case 6:e.$notify({title:"Chúc mừng",message:"Cập nhật thành công",type:"success"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$notify.error({title:"Thất bại",message:"Cập nhật thất bại"});case 12:case"end":return t.stop()}}),t,this,[[1,9]])}))),500)}},j=I,O=a("2877"),U=Object(O["a"])(j,o,i,!1,null,null,null),R=U.exports,P={name:"userInfo",data:function(){return{}},components:{UserInfo:R,"nav-menu":s["a"]},methods:{}},S=P,T=Object(O["a"])(S,r,n,!1,null,null,null);e["default"]=T.exports},"664c":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light",class:t.currentTheme},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[a("img",{staticClass:"img-fluid",attrs:{src:t.MainLogo}})]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbar"}},[a("ul",{staticClass:"navbar-nav mr-auto"},t._l(t.routes,(function(e,r){return a("li",{key:r,staticClass:"nav-item"},[a("router-link",{attrs:{to:e.path,"exact-active-class":"active"}},["checkIn"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.checkin")))])]):t._e(),"checkInCompany"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.companyCheckin")))])]):t._e(),"conversation"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.conversation")))])]):t._e(),"board"==e.name?a("div",{staticClass:"nav-link-wrapper"},[a("a",{staticClass:"nav-link"},[t._v(t._s(t.$t("userNav.board")))])]):t._e()])],1)})),0),a("ul",{staticClass:"navbar-nav ml-auto"},[a("avatar",{on:{toggle:t.updateParentOpened,"hide-dropdown":t.updateParentHideDropdown}}),a("div",{staticClass:"position-relative"},[a("div",{staticClass:"dropdown-menu",class:{show:t.opened}},[a("div",{staticClass:"dropdown-item d-flex align-items-center justify-content-between"},[a("div",{staticClass:"col-md-4 px-0"},[t._v(t._s(t.$t("common.selectLang"))+":")]),a("el-select",{staticClass:"col-md-8",attrs:{placeholder:"Language"},on:{change:t.handleChangeLang},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}},["en"==t.$i18n.locale?a("div",t._l(t.commonData.optionLangEN,(function(e,r){return a("el-option",{key:r,attrs:{label:e.text,value:e.value}},[a("div",{staticClass:"d-flex align-items-center"},[a("img",{staticClass:"logo-lang",attrs:{src:e.flag}}),a("div",{staticClass:"ml-2"},[t._v(t._s(e.text))])])])})),1):a("div",t._l(t.commonData.optionLangVN,(function(e,r){return a("el-option",{key:r,attrs:{label:e.text,value:e.value}},[a("div",{staticClass:"d-flex align-items-center"},[a("img",{staticClass:"logo-lang",attrs:{src:e.flag}}),a("div",{staticClass:"ml-2"},[t._v(t._s(e.text))])])])})),1)])],1),a("div",{staticClass:"dropdown-item d-flex align-items-center justify-content-between"},[a("div",{staticClass:"col-md-4 px-0"},[t._v(t._s(t.$t("common.theme"))+":")]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"custom-control custom-switch"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"switch"},domProps:{checked:"theme-dark"==t.currentTheme},on:{change:function(e){return t.handleTheme()}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"switch"}})])])]),a("div",{staticClass:"dropdown-item"},[a("a",{staticClass:"d-block",attrs:{href:"javascript:;"},on:{click:function(e){return t.redirectTo("/userInfo")}}},[t._v(t._s(t.$t("common.accountInfo")))])]),a("div",{staticClass:"dropdown-item"},[a("a",{staticClass:"d-block",attrs:{href:"javascript:;"},on:{click:t.linkToAdmin}},[t._v(t._s(t.$t("common.infoManagement")))])]),a("div",{staticClass:"dropdown-item"},[a("a",{staticClass:"d-block",attrs:{href:"javascript:;"},on:{click:t.logout}},[t._v(t._s(t.$t("common.logout")))])])])])],1)])],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbar"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],s=(a("caad"),a("2532"),a("96cf"),a("1da1")),o=a("5530"),i=a("d046"),c=a("2f62"),l=a("29db"),u=a("7150"),m=a("267f"),d=a.n(m),p=a("e67d"),v=a.n(p),f={components:{avatar:u["a"]},directives:{ClickOutside:v.a},data:function(){return{routes:i["a"],commonData:l["a"],MainLogo:d.a,connection:null,pathname:"",opened:!1,lang:localStorage.getItem("lang")?localStorage.getItem("lang"):"vn",currentTheme:localStorage.getItem("theme-color")?localStorage.getItem("theme-color"):"theme-light"}},created:function(){var t=this;t.pathname=window.location.pathname,t.listeningSocket()},mounted:function(){var t=this,e=document.body;"theme-dark"==t.currentTheme?e.classList.add("theme-dark"):e.classList.remove("theme-dark")},computed:Object(o["a"])({},Object(c["b"])({currentUser:"$_loginPage/getCurrentUser"})),methods:{updateParentOpened:function(t){var e=this;e.opened=t},updateParentHideDropdown:function(t){var e=this;e.opened=t},handleChangeLang:function(t){var e=this;e.lang=t,localStorage.setItem("lang",e.lang),this.$store.dispatch("setLang",e.lang)},handleTheme:function(){var t=this,e=localStorage.getItem("theme-color"),a=document.body;"theme-dark"===e?(localStorage.setItem("theme-color","theme-light"),t.currentTheme=localStorage.getItem("theme-color"),a.classList.remove("theme-dark")):(localStorage.setItem("theme-color","theme-dark"),t.currentTheme=localStorage.getItem("theme-color"),a.classList.add("theme-dark")),t.$emit("handle-theme",t.currentTheme)},listeningSocket:function(){var t=this,e=a("1a9a");t.connection=(new e.HubConnectionBuilder).withUrl("".concat("https://dev-kpi-api.twgroup.vn","/chatHub")).build(),t.connection.start().then((function(){t.connection.on("ReceiveMessage",function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a,r,n,s,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=o,e.next="sendTextMessage"===e.t0?3:"moveCard"===e.t0?9:13;break;case 3:if(!t.pathname.includes("conversation")||t.currentUser.id!==a){e.next=8;break}return e.next=6,t.$store.dispatch(n,s);case 6:return e.next=8,t.$store.dispatch("$_conversation/getListConversation");case 8:return e.abrupt("break",14);case 9:if(!t.pathname.includes("boardDetail/".concat(s))||t.currentUser.id===a){e.next=12;break}return e.next=12,t.$store.dispatch(n,s);case 12:return e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t,a,r,n,s){return e.apply(this,arguments)}}())}))},redirectTo:function(t){t?this.$router.push(t):this.$router.go(-1)},linkToAdmin:function(){var t=this,e=document.body;e.classList.remove("theme-dark"),t.$router.push("/admin/company")},logout:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,a.$store.dispatch("$_loginPage/logout");case 3:a.user=null,document.body.classList.remove("theme-dark");case 5:case"end":return e.stop()}}),e)})))()}}},g=f,h=a("2877"),b=Object(h["a"])(g,r,n,!1,null,"52d455b2",null);e["a"]=b.exports},6966:function(t,e,a){t.exports=a.p+"img/no-images.a9a1e5e3.jpg"},bbb5:function(t,e){}}]);
//# sourceMappingURL=chunk-40cf60a2.4222bc61.js.map